---
interface Link { label: string; href: string }
interface Props {
  links: Link[];
  ctaLabel?: string; ctaHref?: string;
  /** Rend le header transparent en haut de page, puis opaque après scroll */
  transparentOnTop?: boolean;
}
const {
  links,
  ctaLabel = 'Réserver un appel',
  ctaHref = '/contact',
  transparentOnTop = false
} = Astro.props as Props;
import LogoJJ from './LogoJJ.astro';
---

<header id="site-header"
  class={`w-full fixed top-0 left-0 right-0 z-50 transition-colors duration-300
  ${transparentOnTop ? 'bg-transparent border-transparent' : 'bg-bg/85 border-white/10'}
  backdrop-blur border-b`}
>
  <nav class="container flex items-center justify-between h-16" aria-label="Navigation principale">
    <a id="brand" href="/" class="flex items-center gap-2 transition-colors focus-visible:outline-none
      ${transparentOnTop ? 'text-white' : 'text-text'}">
      <LogoJJ title="Logo JJ" class="w-8 h-8 md:w-10 md:h-10" />
      <span class="sr-only">Julien Jeangirard</span>
    </a>
    <ul class="hidden md:flex gap-6">
      {links.map((l) => (
        <li><a class="text-text-muted hover:text-white" href={l.href}>{l.label}</a></li>
      ))}
    </ul>
    <a href={ctaHref} class="inline-flex items-center rounded-lg px-4 py-2 bg-[color:var(--accent)] text-black font-medium hover:opacity-90 focus-visible:outline-none">
      {ctaLabel}
    </a>
  </nav>
</header>

{/** JS minimal : si transparentOnTop, le header devient opaque au-delà de 80px */}
{transparentOnTop && (
  <script>
    const header = document.getElementById('site-header');
    const brand = document.getElementById('brand');
    const onScroll = () => {
      if (window.scrollY > 80) {
        header.classList.remove('bg-transparent','border-transparent');
        header.classList.add('bg-bg/85','border-white/10');
        brand.classList.remove('text-white');
        brand.classList.add('text-text');
      } else {
        header.classList.add('bg-transparent','border-transparent');
        header.classList.remove('bg-bg/85','border-white/10');
        brand.classList.add('text-white');
        brand.classList.remove('text-text');
      }
    };
    onScroll();
    window.addEventListener('scroll', onScroll, { passive: true });
  </script>
)}
